PHASE 4 Documentation for Mash's webapp

## DATABASE STRUCTURE

One huge database of schools with a lot of columns
** Should I do a smaller one for search?

// There is a data dictionary and example data for Carleton at the end of this doc

CREATE TABLE schools (
      ﻿INSTNM TEXT, // will use better name later
      CITY TEXT,
      STABBR TEXT,
      ZIP INT,
      INSTURL TEXT,
      NPCURL TEXT,
      OPEID INT, // OPEID SERIAL (?)
      REGION_ID INT, -> Points to region table
      LOCALE INT,
      LATITUDE FLOAT,
      LONGITUDE FLOAT,
      ADM_RATE INT,
      SATVR25 INT,
      SATVR75 INT,
      SATMT25 INT,
      SATMT75 INT,
      SATWR25 INT,
      SATWR75 INT,
      SATVRMID INT,
      SATMTMID INT,
      SATWRMID INT,
      ACTCM25 INT,
      ACTCM75 INT,
      ACTEN25 INT,
      ACTEN75 INT,
      ACTMT25 INT,
      ACTMT75 INT,
      ACTWR25 INT,
      ACTWR75 INT,
      ACTCMMID INT,
      ACTENMID INT,
      ACTMTMID INT,
      ACTWRMID INT,
      SAT_AVG INT,
      SAT_AVG_ALL INT,
      MAJORS TEXT[],
      PCIP01 FLOAT, // Replace PCIP with TEXT[] ^ , or have api do it?
      PCIP03 FLOAT,
      PCIP04 FLOAT,
      PCIP05 FLOAT,
      PCIP09 FLOAT,
      PCIP10 FLOAT,
      PCIP11 FLOAT,
      PCIP12 FLOAT,
      PCIP13 FLOAT,
      PCIP14 FLOAT,
      PCIP15 FLOAT,
      PCIP16 FLOAT,
      PCIP19 FLOAT,
      PCIP22 FLOAT,
      PCIP23 FLOAT,
      PCIP24 FLOAT,
      PCIP25 FLOAT,
      PCIP26 FLOAT,
      PCIP27 FLOAT,
      PCIP29 FLOAT,
      PCIP30 FLOAT,
      PCIP31 FLOAT,
      PCIP38 FLOAT,
      PCIP39 FLOAT,
      PCIP40 FLOAT,
      PCIP41 FLOAT,
      PCIP42 FLOAT,
      PCIP43 FLOAT,
      PCIP44 FLOAT,
      PCIP45 FLOAT,
      PCIP46 FLOAT,
      PCIP47 FLOAT,
      PCIP48 FLOAT,
      PCIP49 FLOAT,
      PCIP50 FLOAT,
      PCIP51 FLOAT,
      PCIP52 FLOAT,
      PCIP54 FLOAT,
      UGDS INT,
      UG INT,
      UGDS_WHITE FLOAT,
      UGDS_BLACK FLOAT,
      UGDS_HISP FLOAT,
      UGDS_ASIAN FLOAT,
      UGDS_AIAN FLOAT,
      UGDS_NHPI FLOAT,
      UGDS_2MOR FLOAT,
      UGDS_NRA FLOAT,
      UGDS_UNKN FLOAT,
      UGDS_WHITENH FLOAT,
      UGDS_BLACKNH FLOAT,
      UGDS_API FLOAT,
      UGDS_AIANOLD FLOAT,
      UGDS_HISPOLD FLOAT,
      UG_NRA FLOAT,
      UG_UNKN FLOAT,
      UG_WHITENH FLOAT,
      UG_BLACKNH FLOAT,
      UG_API FLOAT,
      UG_AIANOLD FLOAT,
      UG_HISPOLD FLOAT,
      NPT4_PRIV INT,
      NPT41_PUB INT,
      NPT42_PUB INT,
      NPT43_PUB INT,
      NPT44_PUB INT,
      NPT45_PUB INT,
      NPT41_PRIV INT,
      NPT42_PRIV INT,
      NPT43_PRIV INT,
      NPT44_PRIV INT,
      NPT45_PRIV INT,
      NUM4_PRIV INT,
      COSTT4_A INT,
      TUITIONFEE_IN INT,
      TUITIONFEE_OUT INT,
      FEMALE_ENRL_ORIG_YR2_RT FLOAT,
      MALE_ENRL_ORIG_YR2_RT FLOAT,
      GRAD_DEBT_MDN INT,
      FIRSTGEN_DEBT_MDN INT,
      NOTFIRSTGEN_DEBT_MDN INT,
      FIRST_GEN FLOAT,
      COUNT_WNE_INDEP0_INC1_P10 INT,
);

CREATE TABLE state (
      id SERIAL,
      abbreviation TEXT,
      full_name TEXT
)

CREATE TABLE region_id (
      id SERIAL,
      name TEXT,
      states TEXT[]
);

CREATE TABLE major (
      id SERIAL,
      name TEXT
);



CREATE TYPE mood AS ENUM () // figure out how to do enum


**** POTENTIAL EFFICIENCY IMPROVEMENT ****

Pre - building lists of schools by state / regions to speed up search ?



## API STRUCTURE

1. SYNOPSIS: Filter the list of schools using the query parameters. At any moment, multiple
parameters are going to be used.

QUERY (GET): /schools/param1=<value>&param2=<value>&...page=<number>

RESPONSE: a list of 20 schools with the following details :
          * name
          * location
          * acceptance rate
          * SAT
          * ACT
          * Yearly Tuition
          * Diversity
          * Mid Career Income
          * SERIAL/ 8 digit unique id (OPEID)

GET Parameters :
Parameters  |   Required   |          Valid Options          |   DEFAULT    |     DESCRIPTION
------------------------------------------------------------------------------
type                y            public, private, all (TXT)       all
degree              y                 2, 4, all (TXT)            all           2 year or 4 year colleges
majors              n               see MAJOR_LIST (TXT)         all
region_id           n              see REGION_ID_LIST (INT)      all
SAT_AVG             n                   200 - 1600 (INT ARR)    [800-1600]      AVG SAT score
ACTCMMID            n                    0-34 (INT ARR)         [15-34]          ACT midpoint
COSTT4_A            n                 0 - 100,000 (INT ARR)   [0 - 100,000]     Avg Cost of attendace
MD_EARN_WNE_P9      n                 0 - 300,000 (INT ARR)   [0 - 300,000]      Median earning after 9 yrs
ADM_RATE            n                  0 - 1  (INT ARR)         [0 - 1]         Admission rate in decimals
page                y                 1 - 1000 (INT)                1           Number of page to display

EXAMPLE: https://example.com/schools/SAT_AVG=1200%2C1400&type=private&major=cs&TUITIONFEE_OUT=0%2C70000&ADM_RATE=10%2C30&page=1

[
{"﻿INSTNM" : "Carleton College",
"CITY" : "Northfield",
"STABBR" : "MN",
"OPEID" : 234000,
"ADM_RATE" : 0.2262,
"SAT_AVG" : 1413,
"UGDS_WHITE" : 0.6161,
"COSTT4_A" : 64420,
MD_EARN_WNE_P9
},
{
// more colleges
}
]


2. SYNOPSIS: Returns detailed profile of a singular college provided the 8 digit OPID
QUERY (GET): /school/<OPEID>

RESPONSE: a single college and its whole profile with all 119 columns. See data
 dictionary at the end for unclear variable name

EXAMPLE: https://example.com/school/234000
[
{
"﻿INSTNM" :"Carleton College" ,
"CITY" :"Northfield" ,
"STABBR" :"MN" ,
"ZIP" :"55057-4001" ,
"INSTURL" :"www.carleton.edu" ,
"NPCURL" :"https://apps.carleton.edu/admissions/afford/estimator/ ",
"OPEID" :234000 ,
"OPEID6" :2340 ,
"REGION" :4 ,
"LOCALE" :32 ,
"LATITUDE" :44.462318 ,
"LONGITUDE" :-93.154666 ,
"ADM_RATE" :0.2262 ,
"SATVR25" :660 ,
"SATVR75" :770 ,
"SATMT25" :660 ,
"SATMT75" :770 ,
"SATWR25" :660 ,
"SATWR75" :750 ,
"SATVRMID" :715 ,
"SATMTMID" :715 ,
"SATWRMID" :705 ,
"ACTCM25" :30 ,
"ACTCM75" :33 ,
"ACTEN25" : null ,
"ACTEN75" : null ,
"ACTMT25" : null ,
"ACTMT75" : null ,
"ACTWR25" : null ,
"ACTWR75" : null ,
"ACTCMMID" :32 ,
"ACTENMID" : null ,
"ACTMTMID" : null ,
"ACTWRMID" : null ,
"SAT_AVG" :1413 ,
"SAT_AVG_ALL" :1413 ,
"PCIP01" :0 ,
"PCIP03" :0.0201 ,
"PCIP04" :0 ,
"PCIP05" :0.0241 ,
"PCIP09" :0 ,
"PCIP10" :0 ,
"PCIP11" :0.1006 ,
"PCIP12" :0 ,
"PCIP13" :0 ,
"PCIP14" :0 ,
"PCIP15" :0 ,
"PCIP16" :0.0302 ,
"PCIP19" :0 ,
"PCIP22" :0 ,
"PCIP23" :0.0644 ,
"PCIP24" :0 ,
"PCIP25" :0 ,
"PCIP26" :0.1127 ,
"PCIP27" :0.0644 ,
"PCIP29" :0 ,
"PCIP30" :0.006 ,
"PCIP31" :0 ,
"PCIP38" :0.0282 ,
"PCIP39" :0 ,
"PCIP40" :0.1268 ,
"PCIP41" :0 ,
"PCIP42" :0.0604 ,
"PCIP43" :0 ,
"PCIP44" :0 ,
"PCIP45" :0.1992 ,
"PCIP46" :0 ,
"PCIP47" :0 ,
"PCIP48" :0 ,
"PCIP49" :0 ,
"PCIP50" :0.0986 ,
"PCIP51" :0 ,
"PCIP52" :0 ,
"PCIP54" :0.0644 ,
"UGDS" :2045 ,
"UG" :1936 ,
"UGDS_WHITE" :0.6161 ,
"UGDS_BLACK" :0.045 ,
"UGDS_HISP" :0.0748 ,
"UGDS_ASIAN" :0.0856 ,
"UGDS_AIAN" :0.0015 ,
"UGDS_NHPI" :0.001 ,
"UGDS_2MOR" :0.0567 ,
"UGDS_NRA" :0.1017 ,
"UGDS_UNKN" :0.0176 ,
"UGDS_WHITENH" :0.6913 ,
"UGDS_BLACKNH" :0.0463 ,
"UGDS_API" :0.0967 ,
"UGDS_AIANOLD" :0.0065 ,
"UGDS_HISPOLD" :0.0554 ,
"UG_NRA" :0.0181 ,
"UG_UNKN" :0 ,
"UG_WHITENH" :0.8316 ,
"UG_BLACKNH" :0.0294 ,
"UG_API" :0.0821 ,
"UG_AIANOLD" :0.0026 ,
"UG_HISPOLD" :0.0362 ,
"NPT4_PRIV" :26745 ,
"NPT41_PUB" : null ,
"NPT42_PUB" : null ,
"NPT43_PUB" : null ,
"NPT44_PUB" : null ,
"NPT45_PUB" : null ,
"NPT41_PRIV" :12207 ,
"NPT42_PRIV" :13473 ,
"NPT43_PRIV" :14682 ,
"NPT44_PRIV" :22396 ,
"NPT45_PRIV" :38398 ,
"NUM4_PRIV" :228 ,
"COSTT4_A" :64420 ,
"TUITIONFEE_IN" :50874 ,
"TUITIONFEE_OUT" :50874 ,
"FEMALE_ENRL_ORIG_YR2_RT" :0.803571429 ,
"MALE_ENRL_ORIG_YR2_RT" :0.819047619 ,
"GRAD_DEBT_MDN" :19500 ,
"FIRSTGEN_DEBT_MDN" :18409 ,
"NOTFIRSTGEN_DEBT_MDN" :18798 ,
"FIRST_GEN" :0.162393162 ,
"COUNT_WNE_INDEP0_INC1_P10" :21 ,
},
{
// more colleges
}
]


3. SYNOPSIS: Filter the list of schools using the name parameter. Ignores other parameter

QUERY (GET): /name/<search_text>

RESPONSE: a list of 20 schools with the following details :
          * name
          * location
          * acceptance rate
          * SAT
          * ACT
          * Yearly Tuition
          * Diversity
          * Mid Career Income
          * SERIAL/ 8 digit unique id (OPEID)

EXAMPLE: https://example.com/schools/name/carleton or https://example.com/schools/name=carleton or https://example.com/schools/carleton (?)

[
{
"﻿INSTNM" : "Carleton College",
"CITY" : "Northfield",
"STABBR" : "MN",
"OPEID" : 234000,
"ADM_RATE" : 0.2262,
"SAT_AVG" : 1413,
"UGDS_WHITE" : 0.6161,
"COSTT4_A" : 64420,
MD_EARN_WNE_P9 : 7500,
}
]

## Utility endpoints [good for populating dropdowns]
4. /regions [returns a list of all the regions]

eg : [{"Region" :  "Plains", "states" : ["CT", "ME", "MA", "NH", "RI", "VT"]}, ...]

5. /states [returns a list of all the states]

eg : [{"state" : "New York", "abbreviation" : "NY"}, ...]

6. /majors [returns a list of all the possible majors]

eg : ["Computer Science", "Cinema and Media Studies"]

----------------------------------------

## REGION_ID_LIST :
1	New England (CT, ME, MA, NH, RI, VT)
2	Mid East (DE, DC, MD, NJ, NY, PA)
3	Great Lakes (IL, IN, MI, OH, WI)
4	Plains (IA, KS, MN, MO, NE, ND, SD)
5	Southeast (AL, AR, FL, GA, KY, LA, MS, NC, SC, TN, VA, WV)
6	Southwest (AZ, NM, OK, TX)
7	Rocky Mountains (CO, ID, MT, UT, WY)
8	Far West (AK, CA, HI, NV, OR, WA)
9	Outlying Areas (AS, FM, GU, MH, MP, PR, PW, VI)


## MAJOR_LIST : [ Would probably need to parse the list to make it more suitable for the DB ]
Agriculture, Agriculture Operations.
Natural Resources And Conservation.
Architecture .
Area, Ethnic, Cultural, Gender, And Group Studies.
Communication, Journalism, .
Communications Technologies/Technicians And Support Services.
Computer And Information Sciences And Support Services.
Personal And Culinary Services.
Education.
Engineering.
Engineering Technologies And Engineering-Related Fields.
Foreign Languages, Literatures, And Linguistics.
Family And Consumer Sciences/Human Sciences.
Legal Professions And Studies.
English Language And Literature/Letters.
Liberal Arts And Sciences, General Studies And Humanities.
Library Science.
Biological And Biomedical Sciences.
Mathematics And Statistics.
Military Technologies And Applied Sciences.
Multi/Interdisciplinary Studies.
Parks, Recreation, Leisure, And Fitness Studies.
Philosophy And Religious Studies.
Theology And Religious Vocations.
Physical Sciences.
Science Technologies/Technicians.
Psychology.
Homeland Security, Law Enforcement, Firefighting
Public Administration And Social Service Professions.
Social Sciences.
Construction Trades.
Mechanic And Repair Technologies/Technicians.
Precision Production.
Transportation And Materials Moving.
Visual And Performing Arts.
Health Professions .
Business, Management, Marketing
History.





## DATA DICTIONARY

INSTNM,Carleton College,Institution name
CITY,Northfield,City
STABBR,MN,State postcode
ZIP,55057-4001,ZIP code
INSTURL,www.carleton.edu,URL for institution's homepage
NPCURL,https://apps.carleton.edu/admissions/afford/estimator/,URL for institution's net price calculator
OPEID,234000,8-digit OPE ID for institution
OPEID6,2340,6-digit OPE ID for institution
REGION,4,Region (IPEDS)
LOCALE,32,Locale of institution
LATITUDE,44.462318,Latitude
LONGITUDE,-93.154666,Longitude
ADM_RATE,0.2262,Admission rate
SATVR25,660,25th percentile of SAT scores at the institution (critical reading)
SATVR75,770,75th percentile of SAT scores at the institution (critical reading)
SATMT25,660,25th percentile of SAT scores at the institution (math)
SATMT75,770,75th percentile of SAT scores at the institution (math)
SATWR25,660,25th percentile of SAT scores at the institution (writing)
SATWR75,750,75th percentile of SAT scores at the institution (writing)
SATVRMID,715,Midpoint of SAT scores at the institution (critical reading)
SATMTMID,715,Midpoint of SAT scores at the institution (math)
SATWRMID,705,Midpoint of SAT scores at the institution (writing)
ACTCM25,30,25th percentile of the ACT cumulative score
ACTCM75,33,75th percentile of the ACT cumulative score
ACTEN25,null,25th percentile of the ACT English score
ACTEN75,null,75th percentile of the ACT English score
ACTMT25,null,25th percentile of the ACT math score
ACTMT75,null,75th percentile of the ACT math score
ACTWR25,null,25th percentile of the ACT writing score
ACTWR75,null,75th percentile of the ACT writing score
ACTCMMID,32,Midpoint of the ACT cumulative score
ACTENMID,null,Midpoint of the ACT English score
ACTMTMID,null,Midpoint of the ACT math score
ACTWRMID,null,Midpoint of the ACT writing score
SAT_AVG,1413,Average SAT equivalent score of students admitted
SAT_AVG_ALL,1413,Average SAT equivalent score of students admitted for all campuses rolled up to the 6-digit OPE ID
PCIP01,0,"Agriculture, Agriculture Operations,."
PCIP03,0.0201,Natural Resources And Conservation.
PCIP04,0,Architecture .
PCIP05,0.0241,"Area, Ethnic, Cultural, Gender, And Group Studies."
PCIP09,0,"Communication, Journalism, ."
PCIP10,0,Communications Technologies/Technicians And Support Services.
PCIP11,0.1006,Computer And Information Sciences And Support Services.
PCIP12,0,Personal And Culinary Services.
PCIP13,0,Education.
PCIP14,0,Engineering.
PCIP15,0,Engineering Technologies And Engineering-Related Fields.
PCIP16,0.0302,"Foreign Languages, Literatures, And Linguistics."
PCIP19,0,Family And Consumer Sciences/Human Sciences.
PCIP22,0,Legal Professions And Studies.
PCIP23,0.0644,English Language And Literature/Letters.
PCIP24,0,"Liberal Arts And Sciences, General Studies And Humanities."
PCIP25,0,Library Science.
PCIP26,0.1127,Biological And Biomedical Sciences.
PCIP27,0.0644,Mathematics And Statistics.
PCIP29,0,Military Technologies And Applied Sciences.
PCIP30,0.006,Multi/Interdisciplinary Studies.
PCIP31,0,"Parks, Recreation, Leisure, And Fitness Studies."
PCIP38,0.0282,Philosophy And Religious Studies.
PCIP39,0,Theology And Religious Vocations.
PCIP40,0.1268,Physical Sciences.
PCIP41,0,Science Technologies/Technicians.
PCIP42,0.0604,Psychology.
PCIP43,0,"Homeland Security, Law Enforcement, Firefighting And Related Protective Services."
PCIP44,0,Public Administration And Social Service Professions.
PCIP45,0.1992,Social Sciences.
PCIP46,0,Construction Trades.
PCIP47,0,Mechanic And Repair Technologies/Technicians.
PCIP48,0,Precision Production.
PCIP49,0,Transportation And Materials Moving.
PCIP50,0.0986,Visual And Performing Arts.
PCIP51,0,Health Professions .
PCIP52,0,"Business, Management, Marketing, And Related Support Services."
PCIP54,0.0644,History.
UGDS,2045,Enrollment of undergraduate certificate/degree-seeking students
UG,1936,Enrollment of all undergraduate students
UGDS_WHITE,0.6161,Total share of enrollment of undergraduate degree-seeking students who are white
UGDS_BLACK,0.045,Total share of enrollment of undergraduate degree-seeking students who are black
UGDS_HISP,0.0748,Total share of enrollment of undergraduate degree-seeking students who are Hispanic
UGDS_ASIAN,0.0856,Total share of enrollment of undergraduate degree-seeking students who are Asian
UGDS_AIAN,0.0015,Total share of enrollment of undergraduate degree-seeking students who are American Indian/Alaska Native
UGDS_NHPI,0.001,Total share of enrollment of undergraduate degree-seeking students who are Native Hawaiian/Pacific Islander
UGDS_2MOR,0.0567,Total share of enrollment of undergraduate degree-seeking students who are two or more races
UGDS_NRA,0.1017,Total share of enrollment of undergraduate degree-seeking students who are non-resident aliens
UGDS_UNKN,0.0176,Total share of enrollment of undergraduate degree-seeking students whose race is unknown
UGDS_WHITENH,0.6913,Total share of enrollment of undergraduate degree-seeking students who are white non-Hispanic
UGDS_BLACKNH,0.0463,Total share of enrollment of undergraduate degree-seeking students who are black non-Hispanic
UGDS_API,0.0967,Total share of enrollment of undergraduate degree-seeking students who are Asian/Pacific Islander
UGDS_AIANOLD,0.0065,Total share of enrollment of undergraduate degree-seeking students who are American Indian/Alaska Native
UGDS_HISPOLD,0.0554,Total share of enrollment of undergraduate degree-seeking students who are Hispanic
UG_NRA,0.0181,Total share of enrollment of undergraduate students who are non-resident aliens
UG_UNKN,0,Total share of enrollment of undergraduate students whose race is unknown
UG_WHITENH,0.8316,Total share of enrollment of undergraduate students who are white non-Hispanic
UG_BLACKNH,0.0294,Total share of enrollment of undergraduate students who are black non-Hispanic
UG_API,0.0821,Total share of enrollment of undergraduate students who are Asian/Pacific Islander
UG_AIANOLD,0.0026,Total share of enrollment of undergraduate students who are American Indian/Alaska Native
UG_HISPOLD,0.0362,Total share of enrollment of undergraduate students who are Hispanic
NPT4_PRIV,26745,Average net price for Title IV institutions (private for-profit and nonprofit institutions)
NPT41_PUB,null,"Average net price for $0-$30,000 family income (public institutions)"
NPT42_PUB,null,"Average net price for $30,001-$48,000 family income (public institutions)"
NPT43_PUB,null,"Average net price for $48,001-$75,000 family income (public institutions)"
NPT44_PUB,null,"Average net price for $75,001-$110,000 family income (public institutions)"
NPT45_PUB,null,"Average net price for $110,000+ family income (public institutions)"
NPT41_PRIV,12207,"Average net price for $0-$30,000 family income (private for-profit and nonprofit institutions)"
NPT42_PRIV,13473,"Average net price for $30,001-$48,000 family income (private for-profit and nonprofit institutions)"
NPT43_PRIV,14682,"Average net price for $48,001-$75,000 family income (private for-profit and nonprofit institutions)"
NPT44_PRIV,22396,"Average net price for $75,001-$110,000 family income (private for-profit and nonprofit institutions)"
NPT45_PRIV,38398,"Average net price for $110,000+ family income (private for-profit and nonprofit institutions)"
NUM4_PRIV,228,Number of Title IV students (private for-profit and nonprofit institutions)
COSTT4_A,64420,Average cost of attendance (academic year institutions)
TUITIONFEE_IN,50874,In-state tuition and fees
TUITIONFEE_OUT,50874,Out-of-state tuition and fees
FEMALE_ENRL_ORIG_YR2_RT,0.803571429,Percent of female students who were still enrolled at original institution within 2 years
MALE_ENRL_ORIG_YR2_RT,0.819047619,Percent of male students who were still enrolled at original institution within 2 years
GRAD_DEBT_MDN,19500,The median debt for students who have completed
FIRSTGEN_DEBT_MDN,18409,The median debt for first-generation students
NOTFIRSTGEN_DEBT_MDN,18798,The median debt for not-first-generation students
FIRST_GEN,0.162393162,Share of first-generation students
COUNT_WNE_INDEP0_INC1_P10,21,"Number of dependent students working and not enrolled 10 years after entry in the lowest income tercile $0-$30,000 "
